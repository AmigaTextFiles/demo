                      Enhanced Chip Set

Это приложение содержит информацию об Enhanced  Chip  Set  (ECS).  ECS
состоит  из  обновленных чипов Agnus (8372-R3) и Denise (8373-R3). Эти
чипы  поддерживают  кроме  всех   стандартных   возможностей,   новые,
дополнительные возможности.

ECS - установлена стандартно в A3000. Расширенные чипы Agnus и  Denise
совместимы  по  разъемам  для  замены старых чипов в A500 или A2000. В
A1000  ECS  установить  нельзя.  Когда  A2000  переключена  в   режим,
использующий   один   мегабайт   chip   памяти,  она  будет  нормально
функционировать с чипом ECS как под системой V1.3, так и под V2.0.

ECS чипы разработаны для работы как в режиме NTSC, так и в режиме PAL.
Однако,  американские  чипы сконфигурированы для работы в режиме NTSC.
Для их использования на Амигах с режимом PAL, вы можете переустановить
перемычки на материнской плате.

Новые особенности ECS следующие:

A3000 имеет 1 МБ chip памяти,  и  соответствующим  образом  переключив
перемычки на материнской плате, может быть добавлен еще 1 МБ. На A2000
новый чип Agnus может обращаться к chip памяти, объемом до 1 мегабайта
с  соответствующей  установкой  перемычек  на  материнской  плате. Это
обеспечивает  программы  большим  количеством  памяти,  доступной  для
чипсета.

Новый чип Agnus позволяет выполнять блиттером  операции,  размером  до
32к х 32к пикселей.

Новый чип Denise имеет новый  видео  режим  -  SuperHires,  в  котором
горизонтальное разрешение достигает 1280 пикселей.

Все  стандартные  экранные  разрешения  и   количества   цветов   OCS,
поддерживаются и ECS.

Kickstart V2.0 и чипсет ECS поддерживают новый экранный режим высокого
разрешения  - Productivity. При наличии мультисинк монитора этот режим
дает неинтерлейсные экраны с разрешением 640 x 480, до четырех цветов.
Все  программы,  открывающиеся  на экране WorkBench будут работать и в
новом  разрешении.  Кроме  того,  новые  программы   могут   открывать
собственные экраны в режиме Productivity.

Новый чип Denise дает 4 новых возможности для работы с генлоком:

   *  Chromakey
   *  BitPlaneKey
   *  BorderBlank
   *  BorderNotTransparent

ChromaKey позволяет управлять наложением  видеоизображения  с  помощью
любого  цветового  регистра.  BitPlaneKey  позволяет  любому  битплану
служить маской для  наложения  видеоизображения.  BorderBlank  создает
прозрачную  "рамку"  вокруг активной зоны экрана. BorderNotTransparent
делает непрозрачную "рамку" вокруг активной зоны экрана.

Kickstart 2.0  имеет  встроенную  поддержку  монитора  A2024,  дающего
возможность  использовать неинтерлейсные разрешения 1008 x 800 (1008 x
1024 в режиме PAL) с четырьмя градациями серого. С 1  мегабайтом  chip
памяти, это позволяет устанавливать очень высокое разрешение на экране
Воркбенча.

У чипсета ECS есть несколько ревизий чипов Agnus и Denise. При наличии
этих  чипов graphics.library V36 дает возможность выводить изображения
в  новых  разрешениях,  при  новых  частотах   развертки,   с   новыми
особенностями спрайтов и генлока.

При наличии нового чипа Agnus Graphics.library V36 поддерживает  новые
регистры,  программирующие  частоты  развертки  для обеспечения работы
мультисинк мониторов. Новый режим SuperHires  дает  скорость  пикселей
35ns  и  позиционирование  спрайтов  70ns. Поддержка операций блиттера
большого размера (до 32к x 32к)  обеспечивается  для  всех графических
функций.

При наличии  нового  чипа  Denise  Graphics.library  V36  обеспечивает
бОльшие  диапазоны  управления  началом и концом окна изображения. Как
часть режима SuperHires существуют новые режимы интерпретации цветовых
регистров.  Управление  генлоком слало более гибким. Бордюр может быть
прозрачным или непрозрачным, регистры цвета (не только нулевой)  могут
управлять   наложением   видеоизображения   и   битплан   маски  может
использоваться для маскирования видеосигнала.

Внимание:
Вместе с  новыми  возможностями,  при  использовании  graphics.library
приходят и новые обязательства.

Поле  GfxBase->ChipRevBits0  в  graphics.library  V36  содержит  биты,
указывающие  на  установку  и   активизацию  чипа  ECS. Эта информация
берется из новых или измененных регистров чипа ECS.

Бит GFXF_HR_AGNUS указывает, что установлен новый чип HiRes Agnus. Эта
информация   берется   из   регистра   Agnus  -  VPOSR.  Этот  регистр
определяется следующим образом:

   VPOSR - Старшие биты позиции луча и длинный/короткий кадр

    Бит       15 14 13 12 11 10 09 08  07 06 05 04 03  02 01 00
    Значение LOF I6 I5 I4 I3 I2 I1 I0 LOL -- -- -- -- v10 v9 V8

I0-I6 (биты 8-14) дают версию. В настоящее  время  допускаются  четыре
возможных значения. Значение 20 или 30 обозначает новый Hires Agnus.

   8361 (Нормальный NTSC) или 8370 (fat NTSC) = 10 для NTSC Agnus
   8367 (нормальный PAL)  или 8371 (fat PAL)  = 00 для PAL Agnus
   8368 (Hr)              Или 8372 (fat-hr)   = 20 для PAL, 30 для NTSC

Аналогично, флаг GFXF_HR_DENISE в graphics.library получен из регистра
Denise - DENISEID. Это новый регистр, который может иметь одно из двух
значений. Оригинальный чип Denise (8362) не имеет этого регистра,  так
что   там  будет  содержаться  любое  значение,  оставленное  на  шине
последним циклом. Расширенный чип HighRes Denise (8373) возвращает $FC
в младших 8 битах. Верхние 8 битов зарезервированы.

Режим SuperHires дает скорость изображения пикселей, равную 35ns,  что
в два раза выше горизонтальной разрешающей способности режима Hires, и
в четыре раза выше LoRes. Номинальное  разрешение  SuperHires  -  1280
пикселей. Максимальная глубина цвета в режиме SuperHires - 2 битплана,
насыщающие ширину частот DMA также, как и  четыре  битплана  в  режиме
Hires.

   BPLCON0  Регистр управления битпланами (различные управляющие биты)

        Бит      Значение
        ---      --------
        15       HIRES   При SHRES должен быть 0
        14       BPU2 \
        13       BPU1  > Глубина в режиме SuperHires (1 или 2)
        12       BPU0 /
        11       HAM     Несовместим с режимом SuperHires
        10       DPF     Совместим с режимом SuperHires
        09
        08
        07
        06       SHRES   Включение SuperHires 35ns/пиксель.
        05       BPLHWRM
        04       SPRHWRM
        03       LPEN    Совместим с режимом SuperHires
        02       LACE    Совместим с режимом SuperHires
        01
        00

ПРЕДУПРЕЖДЕНИЕ

 Программисты не  должны  полагаться  на  прямую  интерпретацию  битов
 ViewPort->Modes при определении режима ViewPort.

 Начиная с graphics.library  V36,  поле  ViewPort->Modes  используется
 только для совместимости снизу вверх.

 Под  V1.3  и  ранее  поле  ViewPort->Modes  отражало  некоторые  биты
 BPLCON0,   особенно   Hires  и  Lace.  Однако,  некоторые  логические
 комбинации типа Viewport->Modes PF2PRI конфликтуют с  значением  бита
 SHRES.

 По этой причине, в версии операционной системы 2.0  (graphics.library
 V36   и   старше),   программисты  должны  использовать  новую  схему
 DataBase/ModeID  для  определения  режима  viewport,  при   создании,
 клонировании или копировании VIEWPORT.

Режим SuperHires имеет меньшее количество градаций цветов, чем  режимы
Hires  или  LoRes.  Это происходит потому что преобразование цветов на
очень высоких скоростях требует специальных "приемов". Для  каждой  из
составляющих (красной, зеленой и синей) имеются только по два бита.

Чтобы декодировать цветовую информацию спрайтов и битпланов  в  режиме
SuperHires  происходит  изменение  в использовании регистров. Вместо 4
бит красного, зеленого и  синего,  хранящихся  как  0x0RGB  в  четырех
цветовых  регистрах,  цвета битпланов в SuperHires закодированы особым
образом в шестнадцати младших цветовых регистрах:

                           R    G    B
                          ---- ---- ----
      Битплан (Цвет 0) :  ab-- cd-- ef--
      Битплан (Цвет 1) :  gh-- ij-- kl--
      Битплан (Цвет 2) :  mn-- op-- qr--
      Битплан (Цвет 3) :  st-- uv-- wx--

   БИТ  15  14  13  12  11  10  09  08  07  06  05  04  03  02  01  00
Ц
В  00   .   .   .   .   a   b   a   b   c   d   c   d   e   f   e   f
Е  01   .   .   .   .   g   h   a   b   i   j   c   d   k   l   e   f
Т  02   .   .   .   .   m   n   a   b   o   p   c   d   q   r   e   f
О  03   .   .   .   .   s   t   a   b   u   v   c   d   w   x   e   f
В  04   .   .   .   .   a   b   g   h   c   d   i   j   e   f   k   l
Ы  05   .   .   .   .   g   h   g   h   i   j   i   j   k   l   k   l
Е  06   .   .   .   .   m   n   g   h   o   p   i   j   q   r   k   l
   07   .   .   .   .   s   t   g   h   u   v   i   j   w   x   k   l
Р  08   .   .   .   .   a   b   m   n   c   d   o   p   e   f   q   r
Е  09   .   .   .   .   g   h   m   n   i   j   o   p   k   l   q   r
Г  0A   .   .   .   .   m   n   m   n   o   p   o   p   q   r   q   r
И  0B   .   .   .   .   s   t   m   n   u   v   o   p   w   x   q   r
С  0C   .   .   .   .   a   b   s   t   c   d   u   v   e   f   w   x
Т  0D   .   .   .   .   g   h   s   t   i   j   u   v   k   l   w   x
Р  0E   .   .   .   .   m   n   s   t   o   p   u   v   q   r   w   x
Ы  0F   .   .   .   .   s   t   s   t   u   v   u   v   w   x   w   x

Подобным образом закодированы и цвета спрайтов в режиме SuperHires, но
только в старших шестнадцати цветовых регистрах.

                           R    G    B
                          ---- ---- ----
      Спрайт (Цвет 16) :  AB-- CD-- EF--
      Спрайт (Цвет 17) :  GH-- IJ-- KL--
      Спрайт (Цвет 18) :  MN-- OP-- QR--
      Спрайт (Цвет 19) :  ST-- UV-- WX--

   БИТ  15  14  13  12  11  10  09  08  07  06  05  04  03  02  01 00
Ц
В  10   .   .   .   .   A   B   A   B   C   D   C   D   E   F   E   F
Е  11   .   .   .   .   G   H   A   B   I   J   C   D   K   L   E   F
Т  12   .   .   .   .   M   N   A   B   O   P   C   D   Q   R   E   F
О  13   .   .   .   .   S   T   A   B   U   V   C   D   W   X   E   F
В  14   .   .   .   .   A   B   G   H   C   D   I   J   E   F   K   L
Ы  15   .   .   .   .   G   H   G   H   I   J   I   J   K   L   K   L
Е  16   .   .   .   .   M   N   G   H   O   P   I   J   Q   R   K   L
   17   .   .   .   .   S   T   G   H   U   V   I   J   W   X   K   L
Р  18   .   .   .   .   A   B   M   N   C   D   O   P   E   F   Q   R
Е  19   .   .   .   .   G   H   M   N   I   J   O   P   K   L   Q   R
Г  1A   .   .   .   .   M   N   M   N   O   P   O   P   Q   R   Q   R
И  1B   .   .   .   .   S   T   M   N   U   V   O   P   W   X   Q   R
С  1C   .   .   .   .   A   B   S   T   C   D   U   V   E   F   W   X
Т  1D   .   .   .   .   G   H   S   T   I   J   U   V   K   L   W   X
Р  1E   .   .   .   .   M   N   S   T   O   P   U   V   Q   R   W   X
Ы  1F   .   .   .   .   S   T   S   T   U   V   U   V   W   X   W   X

Примечание
 Шифрование цветов в SuperHires не отражается в ColorTable. Однако оно
 отражено   в   копперлистах  viewport-ов,  сгенерированных  функциями
 graphics.library - MakeVPort(), SetRGB4 (), и т.д..

Имейте в виду что из-за потери более младших  бит  градаций  цветов  в
SuperHires, плавные переходы цветов могут стать трудно отличимыми друг
от друга.

Режим SuperHires имеет более тонкую степень позиционирования спрайтов,
чем  Hires  или  Lores.  В режиме SuperHires возможно позиционирование
спрайтов на каждый второй SuperHires пиксель по границе 70ns. Регистры
ECS SPRxPOS и SPRxCTL работают вместе как регистры управления позицией
и размером спрайта. Загружаются они обычно  каналом  DMA  спрайтов  во
время  горизонтального обратного хода луча, однако могут загружаться и
процессором.

Эти два регистра определяются так:

 SPRxPOS  Вертикальная и горизонтальная позиция спрайта

Бит   Имя
----  ---
15-08
07-00 SH8-SH1 Значение начальной позиции. Младший бит (SH0) в SPRxCTL.

 SPRxCTL Позиция спрайта и управляющие данные

Бит   Имя
----  ----
15-08
07
06
05
04    SHSH1 Начальная горизонтальная позиция (режим SHR) Шаг - 70ns
03    SHSH0 Начальная горизонтальная позиция (режим SHR) Шаг - 35ns
                                            (нереализован)
02
01
00    SH0 Младший бит начала гориз позиции. Шаг - 140 ns.

ПРИМЕЧАНИЕ: Биты 3 и 4 имеются только в чипе ECS.

 Предупреждение:

 Позиционирование  спрайтов  по  70ns   доступно   только   в   режиме
 SuperHires.  Попытка  использовать  позиционирование по 70ns в режиме
 Hires может привести к непредсказуемым результатам.

Новый  чип  Agnus  имеет  регистры  для  установки  частоты   строчной
развертки. Graphics.library V36 обеспечивает:

   NTSC (525 строк, 227.5 тактов на строку)
   PAL  (625 строк, 227.5 тактов на строку)
   VGA  (525 строк, 114.0 тактов на строку)

Graphics.library V36  управляет  различным  числом  тактов  на  строку
развертки   с   помощью   комбинации   регистров.   Каждая  комбинация
обеспечивает различную частоту  развертки  и  число  строк  на  экране
монитора:

   HTOTAL    Старший номер в горизонтальной строке.

    Бит  15 14 13 12 11 10 09 08 07 06 05 04 03 02 10 00
    Имя   0  0  0  0  0  0  0  0 h8 h7 h6 h5 h4 h3 h2 h1

Значение этого регистра представляет число приращений с шагом 280ns на
горизонтальной строке.

   VTOTAL    Номер старшей вертикальной линии

VTOTAL содержит  номер  строки  в  которой  сбрасывается  вертикальный
счетчик.  Это  значение  представляет собой число строк в экране (+1).
Однако, если  экран  интерлейсный,  то  в  этом  случае  это  значение
представляет  собой  число  строк в длинном кадре (+2) и число строк в
коротком кадре (+1).

Программируемая синхронизация выполняется через пять  новых  регистров
Agnus:

   VSSTRT    Вертикальная позиция линии начала VSYNC
   VSSTOP    Вертикальная позиция линии останова VSYNC
   HSSTRT    Горизонтальная позиция линии начала HSYNC
   HSSTOP    Горизонтальная позиция линии останова HSYNC
   HCENTER   Горизонтальная позиция Vsync при интерлейсе.

Приемлемое  содержание  регистров  может   генерироваться   установкой
HCENTER,  равным  половине  горизонтальной  строки от HSSTRT, HBSTOP =
(HSSTOP-HSSTRT)  перед  HCENTER,  с  HBSTRT  =  (HSSTOP-HSSTRT)  перед
HSSTRT.

Программируемый обратный ход выполняется через четыре  новых  регистра
ECS Agnus:

   HBSTRT    Горизонтальная позиция линии начала HBLANK
   HBSTOP    Горизонтальная позиция линии останова HBLANK
   VBSTRT    Вертикальная позиция линии начала VBLANK
   VBSTOP    Вертикальная позиция линии останова VBLANK

Новый регистр  в  чипе  Agnus,  BEAMCON0,  управляет  программируемыми
сигналами.


   BEAMCON0  Регистр управления счетчиками видеолуча.

 Бит  Имя
 ---  ---
 15
 14 HARDDIS   Отключает аппаратный гориз/верт обратный ход луча
 13 LPENDIS   Игнорирует значение защелки при чтении верт поз.
 12 VARVBEN   Использ. VBSTRT/STOP отключает жесткую остановку окна
 11 LOLDIS    Отключает переключ. 'длинная строка'/'короткая строка'
 10 CSCBEN    Переадресация составной синхронизации
  9 VARVSYEN  Разрешается переменная вертикальная синхронизация
  8 VARHSYEN  Разрешается переменная горизонтальная синхронизация
  7 VARBEAMEN Разрешается переменный счетчик луча
  6 DUAL      Разрешается режим специального ультра разрешения
  5 PAL       Разрешается программируемый режим PAL
  4 VARCSYEN  Переменная составная синхронизация
  3 BLANKEN   Переадресация составного обратного хода
  2 CSYTRUE   Управление полярностью для вывода C синхронизации
  1 VSYTRUE   Управление полярностью для вывода Y синхронизации
  0 HSYTRUE   Управление полярностью для вывода H синхронизации

 ПРЕДУПРЕЖДЕНИЕ

 Программируемая смена режимов PAL и NTSC -  нововведение  в  V2.0.  В
 этих  режимах  используются   зашитые  в  Agnus/Denise характеристики
 обратного хода и синхронизации.

 Другие режимы, типа VGA  (Программируемый  режим  31  KHz)  отключают
 зашитые  в  железо  характеристики обратного хода и синхронизации. Не
 записывайте ничего в этот регистр.

 Неправильные параметры при записи напрямую в регистр  BEAMCON0  могут
 (теоретически) вывести из строя ваш мультисинк монитор.

Новая graphics.library и ECS дают более  широкие  границы  определения
окна  изображения.  Регистры  DIWSTRT  и  DIWSTOP управляют размером и
положением окна изображения:

   DIWSTRT   Начало окна изображения (верхний левый угол)
   DIWSTOP   Конец окна изображения (нижний правый угол)

     Бит 15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
     Имя V7 V6 V5 V4 V3 V2 V1 V0 H7 H6 H5 H4 H3 H2 H1 H0

Изменился способ задания значений этих двух  регистров.  Использование
DIWSTRT  ограничивается  по вертикали верхними 2/3 экрана (V8=0), а по
горизонтали  -  левыми  3/4  экрана  (H8=0).   Использование   DIWSTOP
ограничивается  по  вертикали  нижними  1/2 экрана, а по горизонтали -
правой 1/4 экрана (H8=1).

Graphics.library V36 поддерживает явное  задание  координат  начала  и
конца  окна  изображения  и  больший  диапазон  задаваемых  значений с
помощью нового регистра DIWHIGH:

   DIWHIGH   Старшие биты позиций начала и конца окна изображения.

      Бит     Имя
      ---     ---
      15       0
      14       0
      13       H8      Горизонтальная конечная позиция. Старший бит.
      12       0
      11       0
      10       V10 \
       9       V9   >  Вертикальная конечная позиция. Старшие 3 бита.
       8       V8  /
       7       0
       6       -
       5       H8      Горизонтальная начальная позиция. Старший бит.
       4       0
       3       0
       2       V10 \
       1       V9   >  Вертикальная начальная позиция. Старшие 3 бита.
       0       V8  /

Это дополнительный регистр чипа ECS, позволяющий задавать начальную  и
конечную  позиции в большем диапазоне. Если в этот регистр не записано
никакое значение, используется старая схема задания DIWSTRT и DIWSTOP.
Если  этот  регистр  записан  последним в последовательности установки
регистров окна изображения, то устанавливается режим  прямого  задания
позиции начала и конца окна изображения.

 ПРИМЕЧАНИЕ относительно совместимости с ECS.

 При  наличии  расширенного  чипа   Denise,   graphics.library   будет
 создавать  копперлисты,  используя  новые  способы  управления  окном
 изображения. Программы, которые при  изменении  вертикальной  позиции
 ViewPort  (DxOffset)  вызывают  последовательно  функции MakeVPort(),
 MrgCop() и Loadview() будут продолжать вести себя обычно.

 Программы которые не  сумели  вызвать  MakeVPort()  при  вертикальном
 перемещении ViewPort могут неправильно изображаться на ECS системе.

Graphics.library V36 поддерживает новые возможности генлока в  режимах
PAL  или  NTSC.  Для управления наложением видеоизображения (COLORKEY)
могут быть выбраны любые  цветовые  регистры.  Также,  для  управления
наложением может быть выбран одиночный битплан (BIITPLANEKEY). Бордюр,
окружающий активное окно может также быть непрозрачным или прозрачным.

 BPLCON0 Управление битпланами (различные управляющие биты)
 BPLCON1 Управление битпланами (управление гориз. скроллингом)
 BPLCON2 Управление битпланами (управление видео приоритетами)
 BPLCON3 Управление битпланами (дополнительные возможности)

 Бит BPLCON0 BPLCON1 BPLCON2 BPLCON3
 --- ------- ------- ------- -------
 15
 14                          ZDBPSEL2 \
 13                          ZDBPSEL1  >Выбор битплана
 12                          ZDBPSEL0 /
 11                          ZDBPEN     Использовать BITPLANEKEY
 10                          ZDCTEN     Использовать COLORKEY
 09                          KILLEHB    Убить halfbrite
 08
 07
 06
 05                          BRDRBLNK   Бордюр прозрачный
 04                          BRDNTRAN   Бордюр непрозрачный
 03
 02
 01
 00  ENBPLCN3               Включает новый регистр BLPCON3

 ПРЕДУПРЕЖДЕНИЕ:

 Генлок разработан для работы только в режимах NTSC и PAL.  Генлок  не
 совместим с режимами 31 KHz.

Graphics.library  V36  поддерживает  расширенный  блиттер  ECS  Agnus,
обеспечивающий размер одной операции до 32768 x 32768 пикселей. Чипсет
OCS мог выполнять операцию размером максимум 1024 x 1024 пикселя:

   BLTSIZE  Регистр размера окна и запуск старого блиттера.

    Бит   15 14 13 12 11 10 09 08 07 06 05 04 03 02 01 00
    Имя   h9 h8 h7 h6 h5 h4 h3 h2 h1 h0 w5 w4 w3 w2 w1 w0

        h = Высота (10 бит = 1024 линии максимум)
        w = Ширина  (6 бит = 1024 пикселя максимум)

Для  осуществления  возможности  делать  блиттером  большие   операции
добавлены 2 новых регистра:

   BLTSIZV    Вертикальный размер ECS блиттера

     Бит   15  14  12  12  11  10 09 08 07 06 05 04 03 02 01 00
     Имя    0 h14 h13 h12 h11 h10 h9 h8 h7 h6 h5 h4 h3 h2 h1 h0

        h = Высота (15 бит = 32768 линий максимум)

   BLTSIZH   Горизонтальный размер и запуск ECS блиттера

     Бит   15 14 13 12 11  10 09 08 07 06 05 04 03 02 01 00
     Имя    0  0  0  0  0 w10 w9 w8 w7 w6 w5 w4 w3 w2 w1 w0

        w = Ширина  (11 бит  = 32768 пикселей максимум)

Используя эти два регистра возможны операции, размером до 32К на 32К -
намного  больше,  чем  позволял OCS чипсет. Старый регистр сохраняется
для совместимости. Сначала должен быть записан регистр BLTSIZV,  затем
BLTSIZH, который и запускает блиттер.

Существование  расширенного  блиттера  отражается  в  состоянии   бита
GFXB_BIG_BLITS     в     GfxBase->ChipRevBits    и    инициализируется
graphics.library  при  включении  питания.  Обратите   Внимание,   что
константа    MAXBYTESPERROW    в    файле    <hardware/blits.h>   была
переопределена, для соответствия большему диапазону операций блиттера.

 ПРИМЕЧАНИЕ: О размерах RastPort.

 Если доступен ECS блиттер, graphics.library поддерживает его для всех
 графических функций, включая заливку, рисование линий и эллипсов.

 Если ECS блиттер  не  установлен,  программисты  должны  ограничивать
 абсолютный размер RastPorts до значений, возможных на старом регистре
 BLTSIZE.

Предыдущие разделы описывают почти все  новые  регистры  ECS.  В  этом
раздел кратко описывает оставшиеся модифицированные регистры ECS.

Следующие  регистры  теперь  имеют  по  два  дополнительных  бита  для
адресации большего количества chip памяти при наличии ECS:

 DSKPTH  020  Дисковый указатель (старшие 5 бит, было 3 бита)
 BLTxPTH 050  Указатели блиттера (старшие 5 бит, было 3 бита)
 COP1LCH 080  Указатель на 1й копперлист (старшие 5 бит, было 3 бита)
 COP2LCH 084  Указатель на 2й копперлист (старшие 5 бит, было 3 бита)
 AUDxLCH 0A0  Указатель на аудиоданные (старшие 5 бит, было 3 бита)

Регистр строба  длинной  строки  STRLONG  может  быть  отключен,  если
отключить бит LOLDIS в регистре BEAMCON0.

   STRLONG 03E Строб для идентификации длинной горизонтально строки

Описание бит регистра BEAMCON0 см. в разделе 'Мультисинк мониторы'

Бит 7 (DOFF) регистра BLTCON1, во включенном состоянии отключает вывод
блиттера в канал D.

BLTCON1 042 Регистр управления блиттером 1

Это позволяет осуществлять ввод  в  каналы  A,  B  и  C  и,  в  случае
необходимости, модифицировать адреса без вывода в канал D.

Регистр BLTCON0L записывает младшие  биты  регистра  BLTCON0,  ускоряя
установку   параметров   для   операций  блиттера  и  вообще,  ускоряя
программы, поскольку старшие биты часто остаются теми-же самыми.

BLTCON0L 05A Регистр управления блиттером 0, младшие 8 бит (минитермы)

Следующие регистры имеют те же самые функции, как и в OCS,  однако  их
поведение интерпретируется по-другому.

Регистры POT0 и POT1 читают по паре 8ми битных счетчиков как и прежде.

POT0DAT 012 Данные Pot счетчика. Левая пара (верт., гориз.)
POT1DAT 014 Данные Pot счетчика. Правая пара (верт., гориз.)

С программируемыми частотами развертки, чтение значений этих регистров
будет  отличаться.  Существует  зависимость  -  более  высокая частота
развертки -  меньшее  значение  этих  регистров.  Изменения  развертки
отражаются  на этих значениях. Более подробное описание этих регистров
можно найти в приложении А.

Другой регистр, интерпретация которого расширилась - COPCON.

   COPCON    02E Управление Коппером

Этот  однобитный  регистр  (бит  опасности  CDANG).  Если   этот   бит
установлен, копперу разрешается записывать данные в адреса блиттера. В
OCS чипсете, установка этого  бита  допускает  запись  по  адресам  от
$DFF03E  до  $DFF07E.  Теперь, в ECS, если этот бит установлен, коппер
может обращаться ко всем  регистрам  Амиги.  Если  этот  бит  сброшен,
коппер может обращаться к адресам от $DFF03E до $DFF07E, то есть в тот
же самый диапазон, как при установленном бите опасности в OCS.

Регистр AUDxPER - еще один регистр, чье значение  зависит  от  частоты
строчной развертки.

   AUDxPER 0A6  Период аудио канала x.

В   разных   режимах   развертки,   максимальное   значение    частоты
воспроизведения   отличается.   Вообще,  увеличение  частоты  строчной
развертки  уменьшает  максимальный   период.   Корректировки   частоты
развертки также отражаются на этом максимальном значении.

Подробности о регистре AUDxPER, и любом другом регистре чипсета, см. в
Приложении A и в Приложении B.

В этом списке регистров  перечисляются  новые  и  измененные  регистры
чипсета ECS.

----------------------------------------------------------------------
СМЕЩ РЕГИСТР V2.0 R/W ЧИП  ФУНКЦИЯ
----------------------------------------------------------------------
004 VPOSR    chg R A  Старшие биты позиции луча, длинный/короткий кадр
012 POT0DAT  chg R P  Данные Pot счетчика. Левая пара (верт., гориз.)
014 POT1DAT  chg R P  Данные Pot счетчика. Правая пара (верт., гориз.)
020 DSKPTH   chg W A  Дисковый указатель (старшие 5 бит, было 3 бита)
02E COPCON   chg W A  Управление Коппером
03E STRLONG  chg S D  Строб идентификации длинной гориз. строки
042 BLTCON1  chg W A  Регистр управления блиттером 1
050 BLTxPTH  chg W A  Указатели блиттера (старшие 5 бит, было 3 бита)
05A BLTCON0L new W A  Управление блиттером 0, младш. 8 бит (минитермы)
05C BLTSIZV  new W A  Вертикальный размер ECS блиттера
05E BLTSIZH  new W A  Горизонтальный размер и запуск ECS блиттера
07C DENISEID new R D  Номер версии чипа Denise.
080 COP1LCH  chg W A  Указатель на 1й копперлист (старш. 5 бит,было 3)
084 COP2LCH  chg W A  Указатель на 2й копперлист (старш. 5 бит,было 3)
0A0 AUDxLCH  chg W A  Указатель на аудиоданные (старшие 5 бит, было 3)
0A6 AUDxPER  chg W P  Период аудио канала x
100 BPLCON0  chg W AD Управление битпланами (различные управл. биты)
104 BPLCON2  chg W D  Управление битпланами (управление приоритетами)
106 BPLCON3  new W D  Управление битпланами (дополнит. возможности)
142 SPRxCTL  chg W A  Позиция спрайта и управляющие данные
1C0 HTOTAL   new W A  Старший номер. Гориз. строка. (VARBEAMEN=1)
1C2 HSSTOP   new W A  Горизонтальная позиция линии останова HSYNC
1C4 HBSTRT   new W A  Горизонтальная позиция линии начала HBLANK
1C6 HBSTOP   new W A  Горизонтальная позиция линии останова HBLANK
1C8 VTOTAL   new W A  Номер старшей вертикальной линии  (VARBEAMEN=1)
1CA VSSTOP   new W A  Вертикальная позиция линии останова VSYNC
1CC VBSTRT   new W A  Вертикальная позиция линии начала VBLANK
1CE VBSTOP   new W A  Вертикальная позиция линии останова VBLANK
1DC BEAMCON0 new W A  Управление счетчиками видеолуча(SHRES,UHRES,PAL)
1DE HSSTRT   new W A  Горизонтальное начало синхронизации (VARHSY)
1E0 VSSTRT   new W A  Начало верт. синхронизации (VARVSY)
1E2 HCENTER  new W A  Горизонтальная позиция Vsync при интерлейсе
1E4 DIWHIGH  new W AD Старшие биты начала и конца окна изображения.
---------------------------------------------------------------------------
A=Чип Agnus, D=Чип Denise, P=Чип Paula, W=Запись, R=Чтение, S=Строб

end.
